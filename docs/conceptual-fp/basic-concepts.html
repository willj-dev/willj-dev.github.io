<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans|Noto+Serif|Noto+Sans+Mono|Material+Icons">
    <link rel="stylesheet" type="text/css" href="../css/main.css">
    <title>Basic Concepts - willj.dev</title>
  </head>

  
  <body id="page-body" class="dark-mode">
    <header>
      <h1 id="header-path" class="header-element">
        <a id="header-root" href="../">willj.dev</a>
        <span class="header-sep">/</span>
        <a href="../conceptual-fp">conceptual-fp</a>
        <span class="header-sep">/</span>
        <a id="title" href="../conceptual-fp/basic-concepts.html">Basic Concepts</a></h1>
      <div class="header-fill"></div>
    </header>
    <main><div id="page-container">
  <div id="page-toc">
    <ul><li><a href="#sec:pseudoml">PseudoML Syntax</a></li><li><a href="#composition-currying">Composition &amp; Currying</a></li><li><a href="#sec:recursion">Recursion</a></li><li><a href="#sec:purity">Purity</a><ul><li><a href="#pure-functional-languages">Pure Functional Languages</a></li><li><a href="#pure-functions">Pure Functions</a></li></ul></li><li><a href="#strictness-laziness">Strictness &amp; Laziness</a></li><li><a href="#typeclasses">Typeclasses</a><ul><li><a href="#eq">Eq</a></li><li><a href="#ord">Ord</a></li><li><a href="#show">Show</a></li></ul></li></ul>
    <h1>&mu;͇</h1>
    
    
  </div>
  <div id="page-content">
    <h2 id="sec:pseudoml">PseudoML Syntax</h2><p>Type declarations and assignments look like this:</p><div class="sourceCode" id="cb1"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ot">myInt </span><span class="op">:</span> <span class="dt">Int</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>myInt <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="ot">myString </span><span class="op">:</span> <span class="dt">String</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>myString <span class="ot">=</span> <span class="st">&quot;Hello, world!&quot;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> <span class="dt">String</span> <span class="ot">=</span> [<span class="dt">Char</span>]</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="ot">myCharList </span><span class="op">:</span> <span class="dt">String</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>myCharList <span class="ot">=</span> [<span class="ch">'H'</span>, <span class="ch">'e'</span>, <span class="ch">'l'</span>, <span class="ch">'l'</span>, <span class="ch">'o'</span>]</span></code></pre></div><p>The <code>type</code> keyword creates a <em>type synonym</em>; this is just a different label, sometimes to save on keyboard work for a frequently-used but complex type name, or sometimes as a form of documentation (as in <code>type UserId = String</code>). Brand new types are declared with <code>data</code>:</p><div class="sourceCode" id="cb2"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">Optional</span> a <span class="ot">=</span> <span class="dt">Just</span> a <span class="op">|</span> <span class="dt">None</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="ot">justFive </span><span class="op">:</span> <span class="dt">Optional</span> <span class="dt">Int</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>justFive <span class="ot">=</span> <span class="dt">Just</span> <span class="dv">5</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="ot">noInt </span><span class="op">:</span> <span class="dt">Optional</span> <span class="dt">Int</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>noInt <span class="ot">=</span> <span class="dt">None</span></span></code></pre></div><p>Functions are defined like so:</p><div class="sourceCode" id="cb3"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ot">stringLength </span><span class="op">:</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Int</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>stringLength <span class="st">&quot;&quot;</span>     <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>stringLength (_<span class="ot">::</span>s) <span class="ot">=</span> <span class="dv">1</span> <span class="op">+</span> stringLength s</span></code></pre></div><p>Note the <em>pattern matching</em> on the left-hand side of the <code>=</code>. This should be read as “<code>stringLength</code> called with an empty string returns 0; otherwise, we know it isn’t empty, so discard the head of the list and add 1 to the length of the remainder.”</p><p>Function application (that is, “calling” a function) is achieved by simply listing the arguments after the function name, as in <code>f x y z</code> which calls a function <code>f</code> with three arguments. Arguments are always applied from left to right:</p><div class="sourceCode" id="cb4"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>myValue <span class="ot">=</span> f x y z <span class="co">-- same as: (((f x) y ) z)</span></span></code></pre></div><p>and in general, it has higher precedence than any other operator:</p><div class="sourceCode" id="cb5"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>myOtherValue <span class="ot">=</span> f x <span class="op">+</span> g y <span class="co">-- same as: (f x) + (g y)</span></span></code></pre></div><h2 id="composition-currying">Composition &amp; Currying</h2><p>Suppose we have</p><div class="sourceCode" id="cb6"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ot">stringLength </span><span class="op">:</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Int</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ot">isOdd </span><span class="op">:</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span></span></code></pre></div><p>We could write</p><div class="sourceCode" id="cb7"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ot">stringHasOddLength </span><span class="op">:</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>stringHasOddLength s <span class="ot">=</span> isOdd (stringLength s)</span></code></pre></div><p>but that gets tedious quickly if we are chaining several functions together. The idiomatic way to do this is to use <em>function composition</em>:</p><div class="sourceCode" id="cb8"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>stringHasOddLength <span class="ot">=</span> isOdd <span class="op">.</span> stringLength</span></code></pre></div><p>The <code>.</code> in that definition is itself a function:</p><div class="sourceCode" id="cb9"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ot">(.) </span><span class="op">:</span> (b <span class="ot">-&gt;</span> c) <span class="ot">-&gt;</span> (a <span class="ot">-&gt;</span> b) <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> c</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>(f <span class="op">.</span> g) x <span class="ot">=</span> f (g x)</span></code></pre></div><p>It says “take the output of the function on the right, and plug it into the function on the left”. Note that the new definition of <code>stringHasOddLength</code> does not actually bind a name for the argument! We <em>can</em> do that, as in</p><div class="sourceCode" id="cb10"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>stringHasOddLength x <span class="ot">=</span> (isOdd <span class="op">.</span> stringLength) x</span></code></pre></div><p>but there is no need. We’re just saying “<code>stringHasOddLength</code> is the result of composing these two functions.” This is called, somewhat misleadingly, “point-free style.” You can do it in ES too:</p><div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> compose <span class="op">=</span> (g<span class="op">,</span> f) <span class="kw">=&gt;</span> x <span class="kw">=&gt;</span> <span class="fu">g</span>(<span class="fu">f</span>(x))<span class="op">;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> stringLength <span class="op">=</span> s <span class="kw">=&gt;</span> s<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> isOdd <span class="op">=</span> i <span class="kw">=&gt;</span> i <span class="op">%</span> <span class="dv">2</span> <span class="op">===</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> stringHasOddLength <span class="op">=</span> <span class="fu">compose</span>(isOdd<span class="op">,</span> stringLength)<span class="op">;</span></span></code></pre></div><p>If you were to take a static type analysis tool to this code, it would hopefully resolve the type of <code>stringHasOddLength</code> as a function from strings to booleans, despite not having actually used an explicit function definition that binds an argument name.</p><p>Point-free style is related to the concept of “currying”, which is named after a person named Haskell Curry, not the food. If a function takes two arguments, and you feed it only one, the result is a function that takes one argument:</p><div class="sourceCode" id="cb12"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>stringLengths <span class="ot">=</span> map stringLength</span></code></pre></div><p>The <code>map</code> function is the usual: it takes a function <code>(a -&gt; b)</code> and a list <code>[a]</code>, and then returns the result of applying the given function to each element of the list. So if we stare at this definition, since <code>stringLength : String -&gt; Int</code>, we can deduce that <code>stringLengths : [String] -&gt; [Int]</code>.</p><h2 id="sec:recursion">Recursion</h2><p>Recursion is much more important in functional programming than in imperative programming, because recursion is the primary way to implement loops (in addition to the various other uses that it has in common with non-functional code). We will have much more to say about recursion later on (see Part <a href="#part:recursion">5</a>), but for now we can go over some basic examples to get us started.</p><p>Here’s how we might implement <code>map</code> over lists:</p><div class="sourceCode" id="cb13"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ot">map </span><span class="op">:</span> (a <span class="ot">-&gt;</span> b) <span class="ot">-&gt;</span> [a] <span class="ot">-&gt;</span> [b]</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>map _ []      <span class="ot">=</span> []</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>map f (x<span class="ot">::</span>xs) <span class="ot">=</span> f x <span class="ot">::</span> map f xs</span></code></pre></div><p>The <code>::</code> constructor sticks an element on the head of a list. The first equation takes care of the base case (stop recursing once we hit the end of the list), and the second one says to apply the function to the head of the list, and then do the same thing on to the remainder.</p><p>Here’s another example, which works rather like Python’s <code>range()</code> with one argument:</p><div class="sourceCode" id="cb14"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ot">range </span><span class="op">:</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> [<span class="dt">Int</span>]</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>range x <span class="ot">=</span> <span class="kw">if</span> x <span class="op">&lt;</span> <span class="dv">0</span> <span class="kw">then</span> [] <span class="kw">else</span> (x <span class="op">-</span> <span class="dv">1</span>) <span class="ot">::</span> range (x <span class="op">-</span> <span class="dv">1</span>)</span></code></pre></div><h2 id="sec:purity">Purity</h2><p>There are a couple of meanings of <em>pure</em>, depending on context:</p><h3 id="pure-functional-languages">Pure Functional Languages</h3><p>A <em>pure functional language</em>, such as Haskell, is a language that only supports functional-style programming, with no way to represent other programming patterns like object-oriented code. These are usually contrasted with “functional-first” languages like F# or, depending on who you are talking to, Scala; in these languages, functional and object-oriented styles can coexist.</p><p>PseudoML is a pure functional language, because it was invented to illustrate functional programming concepts, so attempting to support additional syntax would just be distracting.</p><h3 id="pure-functions">Pure Functions</h3><p>A <em>pure function</em> is a function that does not have any “side effects”, such as updating a global state, writing to (or reading from!) a file, and so on. You don’t need a pure functional language to write a pure function; here’s one in ES:</p><div class="sourceCode" id="cb15"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> pureAdd <span class="op">=</span> (x<span class="op">,</span> y) <span class="kw">=&gt;</span> x <span class="op">+</span> y<span class="op">;</span></span></code></pre></div><p>Pure functions are important for a couple of reasons. From a practical standpoint, they are easy to test; without any global state that can be corrupted by another process, or flaky I/O operations, we know that a pure function called with the same arguments will always produce the same result. From the standpoint of implementing a language, we can get a form of memoization for free: results of pure functions can be cached since the compiler can guarantee that there’s no way for the result to change from one call to the next.</p><p>Of course, it doesn’t make sense for a language to only support pure functions; the <em>whole point</em> of running a program is to get the side effects! Side-effectful operations belong to their own type, <code>IO a</code>. For instance, an <code>IO Int</code> represents an operation that does something unspecified and then returns an <code>Int</code>. They are, therefore, somewhat spooky; running an <code>IO</code> “action” is dangerous if you don’t know where it’s been, since even an innocuous-seeming <code>IO Int</code> could represent the action “wipe the hard drive and then return the number of dirty pictures that this program emailed your grandma”.</p><p>To facilitate effective testing (and out of a desire to be tidy), functional programmers generally try to keep as much of their code pure as possible. Consider, for instance, parsing an image file and returning the number of red pixels present in the image. Side effects are only required when reading the file and then printing the result to the console; everything in between is pure operations on the contents of the file, which is just a series of bytes. Folks who are new to functional programming often find the restriction of side effects to <code>IO</code> grating, but that is just after a lifetime of being able to sprinkle side effects around anywhere. Once you get used to structuring your code appropriately, it becomes second nature, and eventually the cavalier attitude of other languages toward side effects starts to feel a bit rude!</p><div class="sourceCode" id="cb16"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">justAddIPromise</span>(x<span class="op">,</span> y) {</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">window</span><span class="op">.</span><span class="fu">open</span>(<span class="st">'http://downloadvirus.biz'</span>)<span class="op">;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sendDirtyEmails</span>(<span class="st">'grandma@oldfolks.net'</span>)<span class="op">;</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">'ha ha you suck'</span>)<span class="op">;</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">+</span> y<span class="op">;</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><h2 id="strictness-laziness">Strictness &amp; Laziness</h2><p>Strictness refers to whether or not a given expression in the source code is actually evaluated by the processor. One famous example of “non-strict semantics” is what we call short-circuiting in boolean operators:</p><div class="sourceCode" id="cb17"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> everythingIsFine <span class="op">=</span> <span class="kw">true</span> <span class="op">||</span> <span class="fu">fireAllMissiles</span>()<span class="op">;</span></span></code></pre></div><p>The expression on the left-hand side of the <code>||</code> is always evaluated, but the right-hand side may not be, if the processor knows by then what the overall expression will evaluate to. On the other hand, most other operations, such as function calls, follow “strict semantics”:</p><div class="sourceCode" id="cb18"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">uhoh</span>(stuff<span class="op">,</span> things) {</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`here is some stuff: </span><span class="sc">${</span>stuff<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">uhoh</span>(<span class="st">'my stuff'</span><span class="op">,</span> <span class="fu">fireAllMissiles</span>())<span class="op">;</span></span></code></pre></div><p>Whenever you call a function, the arguments are always evaluated <em>first</em>, and then they are passed to the body of the function—regardless of whether the function body even refers to every argument it’s given.</p><p>A term that is frequently used alongside “non-strict” is “lazy”. Laziness is a way to <em>implement</em> non-strictness. In a lazy language, all expressions are implicitly replaced by zero-argument functions that <em>return</em> the expression’s value, called a “thunk”:</p><div class="sourceCode" id="cb19"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> two <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> twoThunk <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="dv">2</span><span class="op">;</span></span></code></pre></div><p>This is done behind the scenes, or else the code would be unacceptably cluttered. Although it makes it somewhat hard to decide whether some code will execute before or after another, the only times where that usually matters (namely, executing side-effectful actions) are wrapped up in the <code>IO</code> monad (more on that later!) which has a sense of “do this before that” built-in to the structure.</p><p>PseudoML as used here will in general be non-strict, though in the few places where it matters we will point that out. Specific languages have different ways to achieve strictness/non-strictness when that is not the default behavior, so we will leave it up to the reader to determine how to implement that in the wild.</p><h2 id="typeclasses">Typeclasses</h2><p>A typeclass is a set of functions that can be overloaded to work with any type. Defining how those functions work on a particular type is called <em>implementing</em> that typeclass. The most basic typeclasses are <code>Eq</code>, <code>Ord</code>, and <code>Show</code>, which we will go over here. In the next section, we’ll start getting into some of the meatier examples.</p><p>Languages with this concept usually include several functions in the typeclass definition, many of which may be given a “default” definition in terms of some minimal set that must be implemented. This is entirely for practical purposes; in specific cases, there may be a more efficient way to implement one of the “extra” functions. Such considerations are an implementation detail outside our scope, so we will limit our typeclasses to the minimal set of functions, and define the other ones separately when they are needed.</p><h3 id="eq">Eq</h3><p>A data type can be made an instance of <code>Eq</code> if its values can be compared as equal or not equal. It is defined like this:</p><div class="sourceCode" id="cb20"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">typeclass</span> <span class="dt">Eq</span> a</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="ot">    (==) </span><span class="op">:</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Bool</span></span></code></pre></div><p>This says “<code>a</code> is an instance of <code>Eq</code> if there is an implementation for the <code>(==)</code> function.” As an example, consider a data type representing the three primary colors:</p><div class="sourceCode" id="cb21"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">PrimaryColor</span> <span class="ot">=</span> <span class="dt">Red</span> <span class="op">|</span> <span class="dt">Blue</span> <span class="op">|</span> <span class="dt">Green</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="kw">instance</span> <span class="dt">Eq</span> <span class="dt">PrimaryColor</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">Red</span>   <span class="op">==</span> <span class="dt">Red</span>   <span class="ot">=</span> <span class="dt">True</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">Blue</span>  <span class="op">==</span> <span class="dt">Blue</span>  <span class="ot">=</span> <span class="dt">True</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">Green</span> <span class="op">==</span> <span class="dt">Green</span> <span class="ot">=</span> <span class="dt">True</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    _     <span class="op">==</span> _     <span class="ot">=</span> <span class="dt">False</span></span></code></pre></div><p>For “obvious” cases like this, the compiler can frequently implement this sort of thing on its own, but that functionality is generally language-dependent.</p><p>Polymorphic functions are written like this:</p><div class="sourceCode" id="cb22"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ot">elem </span><span class="op">:</span> <span class="dt">Eq</span> a <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> [a] <span class="ot">-&gt;</span> <span class="dt">Bool</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>elem _ []      <span class="ot">=</span> <span class="dt">False</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>elem e (x<span class="ot">::</span>xs) <span class="ot">=</span> e <span class="op">==</span> x <span class="op">||</span> elem e xs</span></code></pre></div><p>The <code>=&gt;</code> notation says that <code>a</code> can be any type, as long as it has an <code>Eq</code> instance. This is a function of two arguments: something to look for in a list, and the list in which to look. The second line says “nothing is in an empty list.” The third line says “check the first element in the list; if it is equal to what you’re looking for, return <code>True</code>; otherwise, keep looking in the rest of the list.”</p><p>Incidentally, how do we compare lists? Two lists are equal if they have the same elements in the same order. This means that we need a way to compare the elements to see if they’re equal too. So we might write <code>Eq [a]</code> like:</p><div class="sourceCode" id="cb23"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">instance</span> <span class="dt">Eq</span> a <span class="ot">=&gt;</span> <span class="dt">Eq</span> [a]</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    []      <span class="op">==</span> []      <span class="ot">=</span> <span class="dt">True</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    (x<span class="ot">::</span>xs) <span class="op">==</span> (y<span class="ot">::</span>ys) <span class="ot">=</span> x <span class="op">==</span> y <span class="op">&amp;&amp;</span> xs <span class="op">==</span> ys</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    _       <span class="op">==</span> _       <span class="ot">=</span> <span class="dt">False</span></span></code></pre></div><p>This says “two empty lists are equal; two nonempty lists are equal if their heads and tails are equal; otherwise, they are never equal.” Note that the <code>Eq a</code> constraint is what lets us use <code>x == y</code>.</p><h3 id="ord">Ord</h3><p><code>Ord</code> types support a notion of “ordering”. The class is defined like so:</p><div class="sourceCode" id="cb24"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">Ordering</span> <span class="ot">=</span> <span class="dt">LT</span> <span class="op">|</span> <span class="dt">EQ</span> <span class="op">|</span> <span class="dt">GT</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="kw">typeclass</span> <span class="dt">Eq</span> a <span class="ot">=&gt;</span> <span class="dt">Ord</span> a</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="ot">    compare </span><span class="op">:</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Ordering</span></span></code></pre></div><p>Similarly to its use in type signatures, the <code>=&gt;</code> at the top says that in order to be an <code>Ord</code>, the type must also implement <code>Eq</code>. The usual operators like <code>&lt;</code> are then defined in terms of <code>compare</code>; for instance,</p><div class="sourceCode" id="cb25"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">&lt;</span>  y <span class="ot">=</span> compare x y <span class="op">==</span> <span class="dt">LT</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">&gt;=</span> y <span class="ot">=</span> not (x <span class="op">&lt;</span> y)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>max x y <span class="ot">=</span> <span class="kw">if</span> x <span class="op">&gt;=</span> y <span class="kw">then</span> x <span class="kw">else</span> y</span></code></pre></div><p>One of the nifty examples using <code>Ord</code> is a recursive implementation of the QuickSort algorithm.</p><div class="sourceCode" id="cb26"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ot">sort </span><span class="op">:</span> (<span class="dt">Ord</span> a) <span class="ot">=&gt;</span> [a] <span class="ot">=&gt;</span> [a]</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>sort []      <span class="ot">=</span> []</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>sort (x<span class="ot">::</span>xs) <span class="ot">=</span> sort left <span class="op">++</span> (x <span class="ot">::</span> sort right) <span class="kw">where</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    left  <span class="ot">=</span> filter (<span class="op">&lt;</span>  x) xs</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    right <span class="ot">=</span> filter (<span class="op">&gt;=</span> x) xs</span></code></pre></div><p>This is a pretty popular canonical “look at how much better FP is!” example, but it emphasizes cuteness over performance. If you are tempted to compare it favorably against an in-place sort implemented in e.g. C, keep in mind that the in-place algorithm is going to be much more space-efficient, and almost certainly less obvious than this little toy algorithm.</p><h3 id="show">Show</h3><p><code>Show</code> is for types that can be represented as a string:</p><div class="sourceCode" id="cb27"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">typeclass</span> <span class="dt">Show</span> a</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="ot">    show </span><span class="op">:</span> a <span class="ot">-&gt;</span> <span class="dt">String</span></span></code></pre></div><p>Most languages also have the ability to generate instances of <code>Show</code> for you. This is also simplified from the definition you might see in the wild, which is designed to support efficiently building the output string for nested structures. Just for fun, here’s an example instance for lists whose elements are themselves <code>Show</code>able.</p><div class="sourceCode" id="cb28"><pre class="sourceCode pseudoml"><code class="sourceCode pseudoml"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">instance</span> <span class="dt">Show</span> a <span class="ot">=&gt;</span> <span class="dt">Show</span> [a]</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    show []      <span class="ot">=</span> <span class="st">&quot;[]&quot;</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    show (x<span class="ot">::</span>xs) <span class="ot">=</span> <span class="st">&quot;[&quot;</span> <span class="op">++</span> show x <span class="op">++</span> showNextElems xs <span class="op">++</span> <span class="st">&quot;]&quot;</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="ot">showNextElems </span><span class="op">:</span> <span class="dt">Show</span> a <span class="ot">=&gt;</span> [a] <span class="ot">-&gt;</span> <span class="dt">String</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>showNextElems []      <span class="ot">=</span> <span class="st">&quot;&quot;</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>showNextElems (x<span class="ot">::</span>xs) <span class="ot">=</span> <span class="st">&quot;, &quot;</span> <span class="op">++</span> show x <span class="op">++</span> showNextElems xs</span></code></pre></div>
  </div>
</div>
</main>
    <footer>
      <span id="site-source" class="footer-element">
        <a href="https://github.com/willj-dev/willj-dev.github.io/">Site Source</a>
      </span>
      <span class="footer-divider">|</span>
      <span id="site-source" class="footer-element">
        <a href="https://github.com/willj-dev/willj-dev.github.io/tree/main/content/pages\conceptual-fp\basic-concepts.rst">Page Source</a>
      </span>
      <span class="footer-divider">|</span>
      <div id="dark-mode" class="footer-element light-mode-only">Dark Mode</div>
      <div id="light-mode" class="footer-element dark-mode-only">Light Mode</div>
      <div class="footer-fill"></div>
      <span id="built-with" class="footer-element">
        Built with <a href="https://jaspervdj.be/hakyll">Hakyll</a>
      </span>
      <span class="footer-divider">|</span>
      <span id="hosted-by" class="footer-element">
        Hosted by <a href="https://pages.github.com">GitHub Pages</a>
      </span>
      <span class="footer-divider">|</span>
      <span id="colors-credit" class="footer-element">
        <a href="https://github.com/chriskempson/base16">Base16</a> color scheme:
          <a href="https://github.com/chriskempson/base16-tomorrow-scheme">Tomorrow<span class="dark-mode-only"> Night</span></a>
      </span>
    </footer>
  </body>
  <script src="../js/colorMode.js"></script>
</html>
